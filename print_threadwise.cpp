#include<iostream>
#include<thread>
#include<mutex>
#include<condition_variable>
using namespace std;

int maxSize=360;
int current=0;
condition_variable cv;
mutex m;
void printvalue(int id){
    while(true){
        unique_lock<mutex> locker(m);
        cv.wait(locker, [id]() { 
            return (current % 3 == id % 3) || current > maxSize; 
        });
        if(current > maxSize) {
            break;
        }
        
        cout<<"Thread "<<id<<" produced: "<<current<<endl;
        current++;
        locker.unlock();
        cv.notify_all();
    }
}
int main(){
    thread t1(printvalue,1);
    thread t2(printvalue,2);
    thread t3(printvalue,3);

    t1.join();
    t2.join();
    t3.join();
    return 0;
}

// PS C:\Users\HP\Documents\C++\projects\helloworld\Multithreading_Problems> g++ print_threadwise.cpp -o print_threadwise                         
// PS C:\Users\HP\Documents\C++\projects\helloworld\Multithreading_Problems> ./print_threadwise.exe
// Thread 3 produced: 0
// Thread 1 produced: 1
// Thread 2 produced: 2
// Thread 3 produced: 3
// Thread 1 produced: 4
// Thread 2 produced: 5
// Thread 3 produced: 6
// Thread 1 produced: 7
// Thread 2 produced: 8
// Thread 3 produced: 9
// Thread 1 produced: 10
// Thread 2 produced: 11
// Thread 3 produced: 12
// Thread 1 produced: 13
// Thread 2 produced: 14
// Thread 3 produced: 15
// Thread 1 produced: 16
// Thread 2 produced: 17
// Thread 3 produced: 18
// Thread 1 produced: 19
// Thread 2 produced: 20
// Thread 3 produced: 21
// Thread 1 produced: 22
// Thread 2 produced: 23
// Thread 3 produced: 24
// Thread 1 produced: 25
// Thread 2 produced: 26
// Thread 3 produced: 27
// Thread 1 produced: 28
// Thread 2 produced: 29
// Thread 3 produced: 30
// Thread 1 produced: 31
// Thread 2 produced: 32
// Thread 3 produced: 33
// Thread 1 produced: 34
// Thread 2 produced: 35
// Thread 3 produced: 36
// Thread 1 produced: 37
// Thread 2 produced: 38
// Thread 3 produced: 39
// Thread 1 produced: 40
// Thread 2 produced: 41
// Thread 3 produced: 42
// Thread 1 produced: 43
// Thread 2 produced: 44
// Thread 3 produced: 45
// Thread 1 produced: 46
// Thread 2 produced: 47
// Thread 3 produced: 48
// Thread 1 produced: 49
// Thread 2 produced: 50
// Thread 3 produced: 51
// Thread 1 produced: 52
// Thread 2 produced: 53
// Thread 3 produced: 54
// Thread 1 produced: 55
// Thread 2 produced: 56
// Thread 3 produced: 57
// Thread 1 produced: 58
// Thread 2 produced: 59
// Thread 3 produced: 60
// Thread 1 produced: 61
// Thread 2 produced: 62
// Thread 3 produced: 63
// Thread 1 produced: 64
// Thread 2 produced: 65
// Thread 3 produced: 66
// Thread 1 produced: 67
// Thread 2 produced: 68
// Thread 3 produced: 69
// Thread 1 produced: 70
// Thread 2 produced: 71
// Thread 3 produced: 72
// Thread 1 produced: 73
// Thread 2 produced: 74
// Thread 3 produced: 75
// Thread 1 produced: 76
// Thread 2 produced: 77
// Thread 3 produced: 78
// Thread 1 produced: 79
// Thread 2 produced: 80
// Thread 3 produced: 81
// Thread 1 produced: 82
// Thread 2 produced: 83
// Thread 3 produced: 84
// Thread 1 produced: 85
// Thread 2 produced: 86
// Thread 3 produced: 87
// Thread 1 produced: 88
// Thread 2 produced: 89
// Thread 3 produced: 90
// Thread 1 produced: 91
// Thread 2 produced: 92
// Thread 3 produced: 93
// Thread 1 produced: 94
// Thread 2 produced: 95
// Thread 3 produced: 96
// Thread 1 produced: 97
// Thread 2 produced: 98
// Thread 3 produced: 99
// Thread 1 produced: 100
// Thread 2 produced: 101
// Thread 3 produced: 102
// Thread 1 produced: 103
// Thread 2 produced: 104
// Thread 3 produced: 105
// Thread 1 produced: 106
// Thread 2 produced: 107
// Thread 3 produced: 108
// Thread 1 produced: 109
// Thread 2 produced: 110
// Thread 3 produced: 111
// Thread 1 produced: 112
// Thread 2 produced: 113
// Thread 3 produced: 114
// Thread 1 produced: 115
// Thread 2 produced: 116
// Thread 3 produced: 117
// Thread 1 produced: 118
// Thread 2 produced: 119
// Thread 3 produced: 120
// Thread 1 produced: 121
// Thread 2 produced: 122
// Thread 3 produced: 123
// Thread 1 produced: 124
// Thread 2 produced: 125
// Thread 3 produced: 126
// Thread 1 produced: 127
// Thread 2 produced: 128
// Thread 3 produced: 129
// Thread 1 produced: 130
// Thread 2 produced: 131
// Thread 3 produced: 132
// Thread 1 produced: 133
// Thread 2 produced: 134
// Thread 3 produced: 135
// Thread 1 produced: 136
// Thread 2 produced: 137
// Thread 3 produced: 138
// Thread 1 produced: 139
// Thread 2 produced: 140
// Thread 3 produced: 141
// Thread 1 produced: 142
// Thread 2 produced: 143
// Thread 3 produced: 144
// Thread 1 produced: 145
// Thread 2 produced: 146
// Thread 3 produced: 147
// Thread 1 produced: 148
// Thread 2 produced: 149
// Thread 3 produced: 150
// Thread 1 produced: 151
// Thread 2 produced: 152
// Thread 3 produced: 153
// Thread 1 produced: 154
// Thread 2 produced: 155
// Thread 3 produced: 156
// Thread 1 produced: 157
// Thread 2 produced: 158
// Thread 3 produced: 159
// Thread 1 produced: 160
// Thread 2 produced: 161
// Thread 3 produced: 162
// Thread 1 produced: 163
// Thread 2 produced: 164
// Thread 3 produced: 165
// Thread 1 produced: 166
// Thread 2 produced: 167
// Thread 3 produced: 168
// Thread 1 produced: 169
// Thread 2 produced: 170
// Thread 3 produced: 171
// Thread 1 produced: 172
// Thread 2 produced: 173
// Thread 3 produced: 174
// Thread 1 produced: 175
// Thread 2 produced: 176
// Thread 3 produced: 177
// Thread 1 produced: 178
// Thread 2 produced: 179
// Thread 3 produced: 180
// Thread 1 produced: 181
// Thread 2 produced: 182
// Thread 3 produced: 183
// Thread 1 produced: 184
// Thread 2 produced: 185
// Thread 3 produced: 186
// Thread 1 produced: 187
// Thread 2 produced: 188
// Thread 3 produced: 189
// Thread 1 produced: 190
// Thread 2 produced: 191
// Thread 3 produced: 192
// Thread 1 produced: 193
// Thread 2 produced: 194
// Thread 3 produced: 195
// Thread 1 produced: 196
// Thread 2 produced: 197
// Thread 3 produced: 198
// Thread 1 produced: 199
// Thread 2 produced: 200
// Thread 3 produced: 201
// Thread 1 produced: 202
// Thread 2 produced: 203
// Thread 3 produced: 204
// Thread 1 produced: 205
// Thread 2 produced: 206
// Thread 3 produced: 207
// Thread 1 produced: 208
// Thread 2 produced: 209
// Thread 3 produced: 210
// Thread 1 produced: 211
// Thread 2 produced: 212
// Thread 3 produced: 213
// Thread 1 produced: 214
// Thread 2 produced: 215
// Thread 3 produced: 216
// Thread 1 produced: 217
// Thread 2 produced: 218
// Thread 3 produced: 219
// Thread 1 produced: 220
// Thread 2 produced: 221
// Thread 3 produced: 222
// Thread 1 produced: 223
// Thread 2 produced: 224
// Thread 3 produced: 225
// Thread 1 produced: 226
// Thread 2 produced: 227
// Thread 3 produced: 228
// Thread 1 produced: 229
// Thread 2 produced: 230
// Thread 3 produced: 231
// Thread 1 produced: 232
// Thread 2 produced: 233
// Thread 3 produced: 234
// Thread 1 produced: 235
// Thread 2 produced: 236
// Thread 3 produced: 237
// Thread 1 produced: 238
// Thread 2 produced: 239
// Thread 3 produced: 240
// Thread 1 produced: 241
// Thread 2 produced: 242
// Thread 3 produced: 243
// Thread 1 produced: 244
// Thread 2 produced: 245
// Thread 3 produced: 246
// Thread 1 produced: 247
// Thread 2 produced: 248
// Thread 3 produced: 249
// Thread 1 produced: 250
// Thread 2 produced: 251
// Thread 3 produced: 252
// Thread 1 produced: 253
// Thread 2 produced: 254
// Thread 3 produced: 255
// Thread 1 produced: 256
// Thread 2 produced: 257
// Thread 3 produced: 258
// Thread 1 produced: 259
// Thread 2 produced: 260
// Thread 3 produced: 261
// Thread 1 produced: 262
// Thread 2 produced: 263
// Thread 3 produced: 264
// Thread 1 produced: 265
// Thread 2 produced: 266
// Thread 3 produced: 267
// Thread 1 produced: 268
// Thread 2 produced: 269
// Thread 3 produced: 270
// Thread 1 produced: 271
// Thread 2 produced: 272
// Thread 3 produced: 273
// Thread 1 produced: 274
// Thread 2 produced: 275
// Thread 3 produced: 276
// Thread 1 produced: 277
// Thread 2 produced: 278
// Thread 3 produced: 279
// Thread 1 produced: 280
// Thread 2 produced: 281
// Thread 3 produced: 282
// Thread 1 produced: 283
// Thread 2 produced: 284
// Thread 3 produced: 285
// Thread 1 produced: 286
// Thread 2 produced: 287
// Thread 3 produced: 288
// Thread 1 produced: 289
// Thread 2 produced: 290
// Thread 3 produced: 291
// Thread 1 produced: 292
// Thread 2 produced: 293
// Thread 3 produced: 294
// Thread 1 produced: 295
// Thread 2 produced: 296
// Thread 3 produced: 297
// Thread 1 produced: 298
// Thread 2 produced: 299
// Thread 3 produced: 300
// Thread 1 produced: 301
// Thread 2 produced: 302
// Thread 3 produced: 303
// Thread 1 produced: 304
// Thread 2 produced: 305
// Thread 3 produced: 306
// Thread 1 produced: 307
// Thread 2 produced: 308
// Thread 3 produced: 309
// Thread 1 produced: 310
// Thread 2 produced: 311
// Thread 3 produced: 312
// Thread 1 produced: 313
// Thread 2 produced: 314
// Thread 3 produced: 315
// Thread 1 produced: 316
// Thread 2 produced: 317
// Thread 3 produced: 318
// Thread 1 produced: 319
// Thread 2 produced: 320
// Thread 3 produced: 321
// Thread 1 produced: 322
// Thread 2 produced: 323
// Thread 3 produced: 324
// Thread 1 produced: 325
// Thread 2 produced: 326
// Thread 3 produced: 327
// Thread 1 produced: 328
// Thread 2 produced: 329
// Thread 3 produced: 330
// Thread 1 produced: 331
// Thread 2 produced: 332
// Thread 3 produced: 333
// Thread 1 produced: 334
// Thread 2 produced: 335
// Thread 3 produced: 336
// Thread 1 produced: 337
// Thread 2 produced: 338
// Thread 3 produced: 339
// Thread 1 produced: 340
// Thread 2 produced: 341
// Thread 3 produced: 342
// Thread 1 produced: 343
// Thread 2 produced: 344
// Thread 3 produced: 345
// Thread 1 produced: 346
// Thread 2 produced: 347
// Thread 3 produced: 348
// Thread 1 produced: 349
// Thread 2 produced: 350
// Thread 3 produced: 351
// Thread 1 produced: 352
// Thread 2 produced: 353
// Thread 3 produced: 354
// Thread 1 produced: 355
// Thread 2 produced: 356
// Thread 3 produced: 357
// Thread 1 produced: 358
// Thread 2 produced: 359
// Thread 3 produced: 360